{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Code/uniapp/fruitsShop/pages/tabbar/cart.vue?277a","webpack:///D:/Code/uniapp/fruitsShop/pages/tabbar/cart.vue?3884","webpack:///D:/Code/uniapp/fruitsShop/pages/tabbar/cart.vue?9563","webpack:///D:/Code/uniapp/fruitsShop/pages/tabbar/cart.vue?0f28","uni-app:///pages/tabbar/cart.vue","webpack:///D:/Code/uniapp/fruitsShop/pages/tabbar/cart.vue?e4b6","webpack:///D:/Code/uniapp/fruitsShop/pages/tabbar/cart.vue?1bdb"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,2F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AAC+K;AAC/K,gBAAgB,sLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,4NAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAA6pB,CAAgB,2pBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgFjrB,gD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AADA,iC,eAEA,EACA,4BACA,gCADA,CADA,EAIA,IAJA,kBAIA,CACA,SACA;AACA,kBAFA,EAGA;AACA,mBAJA,EAKA;AACA,uBANA,EAOA;AACA,cARA,GAUA,CAfA,EAgBA,SACA;AACA,aAFA,qBAEA,CAFA,EAEA,CACA,2BACA,2BACA,mBACA,CACA,CAPA,EAhBA,EAyBA;AACA,QA1BA,oBA0BA,CACA,gBACA,CA5BA,EA6BA;AACA,mBA9BA,+BA8BA,CACA,2BACA,0BACA,CAFA,EAGA,CAlCA,EAoCA,WACA;AACA,YAFA,oBAEA,QAFA,EAEA,gOACA,8EACA,KADA,CACA,wBADA,EAEA,KAFA,CAGA,6KAHA,EAKA,OALA,CAKA,uBALA,EAMA,GANA,GAOA,IAPA,CAOA,gBACA,iDACA,oBACA,gDACA,sCACA,qBACA,2BACA,mCAEA,8CACA,CANA,EAHA,CAUA;AACA,kDAXA,CAYA;AACA,uCAEA,qCACA;AACA,iCACA,CACA,CACA,CA5BA,EADA,8FA+BA,CAjCA,EAkCA;AACA,WAnCA,qBAmCA,CACA,oBACA,CArCA,EAsCA;AACA,WAvCA,mBAuCA,IAvCA,EAuCA,CACA,oBACA,iBADA,IAGA,CA3CA,EA6CA;AACA,SA9CA,iBA8CA,IA9CA,EA8CA,KA9CA,EA8CA,CACA,sBACA,+DACA,CAFA,MAEA,CACA,+BACA,wCACA,uBACA,CAFA,EAGA,0BACA;;AAEA;AACA,KA1DA;AA2DA;AACA,gBA5DA,wBA4DA,IA5DA,EA4DA;AACA;;AAEA;AACA,8BADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OATA;AAUA,KAzEA;AA0EA;AACA,cA3EA,sBA2EA,EA3EA,EA2EA;AACA;AACA;AACA,mBADA;AAEA,wBAFA;AAGA;AACA;AACA;AACA,gBADA,CACA;AACA;AACA;AACA;AACA,aALA;AAMA,WAPA,MAOA;AACA;AACA,SAbA;;AAeA,KA5FA;AA6FA;AACA,aA9FA,uBA8FA;AACA;AACA;AACA,mBADA;AAEA,wBAFA;AAGA;AACA;AACA;AACA,gBADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA,aAPA;AAQA,WATA,MASA;AACA;AACA,SAfA;;AAiBA,KAjHA;AAkHA;AACA,aAnHA,uBAmHA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA;AACA,OATA;;AAWA;AACA;AACA,KAzIA;AA0IA;AACA,eA3IA,yBA2IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA;AACA;AACA;AACA;AACA;AACA,uEADA;;AAGA,KA1JA,EApCA,E;;;;;;;;;;;;;ACjFA;AAAA;AAAA;AAAA;AAAwvC,CAAgB,8qCAAG,EAAC,C;;;;;;;;;;;ACA5wC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/tabbar/cart.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/tabbar/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=3c3dbdc8&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/tabbar/cart.vue\"\nexport default component.exports","export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=template&id=3c3dbdc8&\"","var components\ntry {\n  components = {\n    useEmpty: function() {\n      return import(\n        /* webpackChunkName: \"components/use-empty/use-empty\" */ \"@/components/use-empty/use-empty.vue\"\n      )\n    },\n    useNumberBox: function() {\n      return import(\n        /* webpackChunkName: \"components/use-number-box/use-number-box\" */ \"@/components/use-number-box/use-number-box.vue\"\n      )\n    },\n    useHotGoods: function() {\n      return import(\n        /* webpackChunkName: \"components/use-hot-goods/use-hot-goods\" */ \"@/components/use-hot-goods/use-hot-goods.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"container bg-drak\" :class=\"{ 'margin-bottom-big': !empty }\">\n\t\t<!-- 00. 未授权登录 -->\n\t\t<use-empty v-if=\"!islogin\" e-style=\"round\" e-type=\"unauthorized\" tip=\"当前未授权\" btn-tip=\"去登录\" height=\"70vh\"\n\t\t\t:auto=\"false\" @goto=\"tologin\"></use-empty>\n\t\t<!-- 00. 空白页 -->\n\t\t<use-empty v-else-if=\"empty\" e-style=\"round\" e-type=\"cart\" tip=\"购物车数据为空\" height=\"70vh\"></use-empty>\n\t\t<!-- 00. 列表 -->\n\t\t<view v-else>\n\t\t\t<!-- 01. 购物车列表 -->\n\t\t\t<view class=\"cart-list padding-sm\">\n\t\t\t\t<block v-for=\"(item, index) in cartDatas\" :key=\"item._id\">\n\t\t\t\t\t<view class=\"cart-item bg-main margin-bottom-sm padding-lg pos-r dflex-s border-radius\">\n\t\t\t\t\t\t<view class=\"image-wrapper pos-r\" @click=\"togoods(item)\">\n\t\t\t\t\t\t\t<!-- 商品图片 -->\n\t\t\t\t\t\t\t<image class=\"border-radius-xs wh-full\" mode=\"aspectFill\" :lazy-load=\"true\"\n\t\t\t\t\t\t\t\t:src=\"item.goods.img\">\n\t\t\t\t\t\t\t</image>\n\t\t\t\t\t\t\t<!-- 选中|未选中按钮 -->\n\t\t\t\t\t\t\t<view v-if=\"item.goods.stock_num > 0 && item.goods.stock_num >= item.goods_num\"\n\t\t\t\t\t\t\t\tclass=\"iconfont checkbox pos-a bg-main border-radius-big\"\n\t\t\t\t\t\t\t\t:class=\"{active: item.checked, iconxuanzhongzhuangtai: item.checked, iconweixuanzhongzhuangtai: !item.checked}\"\n\t\t\t\t\t\t\t\t@tap.stop=\"check('item', index)\"></view>\n\n\t\t\t\t\t\t\t<view v-if=\"(item.goods.stock_num < 10 || item.goods.stock_num < item.goods_num)\"\n\t\t\t\t\t\t\t\tclass=\"disabled dflex-c dflex-flow-c pos-a pos-tl-c border-radius-c\">\n\t\t\t\t\t\t\t\t<text>库存不足</text><text class=\"margin-left-xs fs-xs\" v-if=\"item.stock_num > 0\">剩余\n\t\t\t\t\t\t\t\t\t{{item.goods.stock_num}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"item-right padding-left pos-r\">\n\t\t\t\t\t\t\t<!-- 商品名称 -->\n\t\t\t\t\t\t\t<view class=\"clamp-2 title\" @click=\"togoods(item)\">{{item.goods.name}}\n\t\t\t\t\t\t\t\t{{item.goods.name_pw}}\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"ft-dark fs-xs padding-top-xs\">{{ item.goods_sku.spec || '&nbsp;&nbsp;' }}</view>\n\t\t\t\t\t\t\t<view class=\"padding-tb-sm\">\n\t\t\t\t\t\t\t\t<text class=\"price\">{{ item.goods.price / 100 }}</text>\n\t\t\t\t\t\t\t\t<text class=\"m-price\"\n\t\t\t\t\t\t\t\t\tv-if=\"item.goods.market_price > 0\">{{ item.goods.market_price / 100 }}</text>\n\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t<!-- + - 购物车数量 -->\n\t\t\t\t\t\t\t<use-number-box :min=\"1\" :max=\"item.goods.stock_num || 1\" :value=\"item.goods_num\"\n\t\t\t\t\t\t\t\t:is-max=\"item.goods_num >= item.goods.stock_num\" :is-min=\"item.goods_num === 1\"\n\t\t\t\t\t\t\t\t:index=\"index\" :disabled=\"item.goods_num >= item.goods.stock_num\"\n\t\t\t\t\t\t\t\t@eventChange=\"numberChange\">\n\t\t\t\t\t\t\t</use-number-box>\n\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t<!-- 删除 -->\n\t\t\t\t\t\t<view class=\"del-btn iconfont iconlajitong-01 pos-a border-radius-c dflex-c ft-dark fs-xl\"\n\t\t\t\t\t\t\t@tap.stop=\"deleteCart(item._id)\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t</block>\n\t\t\t</view>\n\n\t\t\t<!-- 02. 底部操作栏 -->\n\t\t\t<view class=\"action-section dflex w-full bg-main pos-f padding-right\">\n\t\t\t\t<view class=\"checkbox pos-r h-full dflex-c\">\n\t\t\t\t\t<view class=\"padding-lr iconfont\"\n\t\t\t\t\t\t:class=\"{active:allChecked,iconxuanzhongzhuangtai: allChecked, iconweixuanzhongzhuangtai: !allChecked}\"\n\t\t\t\t\t\t@click=\"check('all')\"></view>\n\t\t\t\t\t<view class=\"clear-btn pos-a tac ft-white\" :class=\"{ show: allChecked }\" @click=\"clearCart\">清空\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"total-box flex1 tar padding-right-lg\">\n\t\t\t\t\t<text class=\"price\">{{total || 0}}</text>\n\t\t\t\t</view>\n\t\t\t\t<button type=\"primary\" class=\"payment no-border border-radius-lg fs\" @click=\"createOrder\">去结算</button>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 03. 猜你喜欢 -->\n\t\t<use-hot-goods title-type=\"round\" title=\"热门推荐\"></use-hot-goods>\n\t</view>\n</template>\n\n<script>\n\tconst _cart = 'usemall-goods-cart'\n\timport { mapState } from 'vuex';\n\texport default {\n\t\tcomputed: {\n\t\t\t...mapState(['islogin'])\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 空白页\n\t\t\t\tempty: false,\n\t\t\t\t// 购物车数据\n\t\t\t\tcartDatas: [],\n\t\t\t\t// 全选状态\n\t\t\t\tallChecked: false,\n\t\t\t\t// 总价格\n\t\t\t\ttotal: 0,\n\t\t\t};\n\t\t},\n\t\twatch: {\n\t\t\t//显示空白页\n\t\t\tcartDatas(e) {\n\t\t\t\tlet empty = e.length === 0;\n\t\t\t\tif (this.empty !== empty) {\n\t\t\t\t\tthis.empty = empty;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// 监听页面显示。页面每次出现在屏幕上都触发，包括从下级页面点返回露出当前页面\n\t\tonShow() {\n\t\t\tthis.loadData();\n\t\t},\n\t\t// 下拉刷新\n\t\tonPullDownRefresh() {\n\t\t\tthis.loadData(() => {\n\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t});\n\t\t},\n\n\t\tmethods: {\n\t\t\t//请求数据\n\t\t\tasync loadData(callback) {\n\t\t\t\tthis.$db['usemall-goods-cart,usemall-goods,usemall-goods-sku'].collection()\n\t\t\t\t\t.where('create_uid == $env.uid')\n\t\t\t\t\t.field(\n\t\t\t\t\t\t'_id, goods_num, goods_sku.spec, goods.price, goods.market_price, goods.stock_num, goods.name,goods.name_pw ,last_modify_time, goods._id as goods_id, goods.img, goods.state'\n\t\t\t\t\t)\n\t\t\t\t\t.orderBy('last_modify_time desc')\n\t\t\t\t\t.get()\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tif (res && res.result && res.result.code === 0) {\n\t\t\t\t\t\t\tlet _cartDatas = [];\r\n\t\t\t\t\t\t\tconsole.log('res.result.data', res.result.data);\n\t\t\t\t\t\t\tres.result.data.forEach(x => {\n\t\t\t\t\t\t\t\tx.goods = x.goods[0];\n\t\t\t\t\t\t\t\tx.goods_id = x.goods_id[0];\n\t\t\t\t\t\t\t\tx.goods_sku = x.goods_sku[0] || {};\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (x.goods && x.goods_id) _cartDatas.push(x);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t// 购物车数据\n\t\t\t\t\t\t\tthis.cartDatas = _cartDatas;\n\t\t\t\t\t\t\t// 计算总价\n\t\t\t\t\t\t\tthis.calcTotal();\n\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\t\t\t// 数据加载完成回调函数\n\t\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\treturn;\n\t\t\t},\n\t\t\t// 跳转登录页\n\t\t\ttologin() {\n\t\t\t\tthis.$api.tologin();\n\t\t\t},\n\t\t\t// 跳转商品页\n\t\t\ttogoods(item) {\n\t\t\t\tthis.$api.togoods({\n\t\t\t\t\tid: item.goods_id\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t// 选中状态处理\n\t\t\tcheck(type, index) {\n\t\t\t\tif (type === 'item') {\n\t\t\t\t\tthis.cartDatas[index].checked = !this.cartDatas[index].checked;\n\t\t\t\t} else {\n\t\t\t\t\tconst checked = !this.allChecked\n\t\t\t\t\tthis.cartDatas.forEach(item => {\n\t\t\t\t\t\titem.checked = checked;\n\t\t\t\t\t})\n\t\t\t\t\tthis.allChecked = checked;\n\t\t\t\t}\n\n\t\t\t\tthis.calcTotal();\n\t\t\t},\n\t\t\t// +- 数量\n\t\t\tnumberChange(data) {\n\t\t\t\tlet cart = this.cartDatas[data.index];\n\n\t\t\t\tthis.$db[_cart].update(cart._id, {\n\t\t\t\t\tgoods_num: data.number\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\tcart.goods_num = data.number;\n\t\t\t\t\t\tthis.calcTotal();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.$api.msg(res.msg);\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 删除\n\t\t\tdeleteCart(id) {\n\t\t\t\tlet _this = this\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '删除购物车',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t_this.$db[_cart].where('create_uid == $env.uid').remove(id)\n\t\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\t\t\t\t\t_this.loadData();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 清空\n\t\t\tclearCart() {\n\t\t\t\tlet _this = this;\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '清空购物车',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t_this.$db[_cart].where('create_uid == $env.uid').remove()\n\t\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\t\t\t\t\t_this.cartDatas = [];\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t_this.$api.msg(res.msg)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 计算总价\n\t\t\tcalcTotal() {\n\t\t\t\tif (this.cartDatas.length === 0) {\n\t\t\t\t\tthis.empty = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet total = 0,\n\t\t\t\t\tchecked = true;\n\n\t\t\t\tthis.cartDatas.forEach(item => {\n\t\t\t\t\tif (item.checked) {\n\t\t\t\t\t\t// 存在库存\n\t\t\t\t\t\tif (item.goods.stock_num > 0 && item.goods.stock_num >= item.goods_num) {\n\t\t\t\t\t\t\ttotal += (item.goods.price / 100) * item.goods_num;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (checked) {\n\t\t\t\t\t\tchecked = false;\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tthis.allChecked = checked;\n\t\t\t\tthis.total = Number(total.toFixed(2));\n\t\t\t},\n\t\t\t// 创建订单\n\t\t\tcreateOrder() {\n\t\t\t\tlet cart_ids = [];\n\t\t\t\tthis.cartDatas.forEach(item => {\n\t\t\t\t\t// 选中有库存购物车\n\t\t\t\t\tif (item.checked && item.goods.stock_num > 0 && item.goods.stock_num > item.goods_num) {\n\t\t\t\t\t\tcart_ids.push(item._id)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tif (cart_ids.length <= 0) {\n\t\t\t\t\tthis.$api.msg('请选择结算商品')\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/pages/order/create?cart_ids=${cart_ids.join(',')}`\n\t\t\t\t})\n\t\t\t},\n\t\t},\n\t}\n</script>\n\n<style lang='scss'>\n\tpage {\n\t\tmin-height: 100%;\n\t}\n\n\t/* 购物车列表项 */\n\t.cart-item {\n\n\t\t&:last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\n\t\t.image-wrapper {\n\t\t\twidth: 230rpx;\n\t\t\theight: 230rpx;\n\t\t\tflex-shrink: 0;\n\n\t\t\timage {\n\t\t\t\topacity: 1;\n\t\t\t}\n\t\t}\n\n\t\t.checkbox {\n\t\t\ttop: -16rpx;\n\t\t\tleft: -16rpx;\n\t\t\tcolor: $font-color-disabled;\n\t\t\tline-height: 1;\n\t\t\tfont-size: 46rpx;\n\t\t\tpadding: 5rpx;\n\t\t\tz-index: 8;\n\t\t}\n\n\t\t.disabled {\n\t\t\tcolor: #fff !important;\n\t\t\twidth: 70%;\n\t\t\theight: 70%;\n\t\t\tbackground-color: rgba(51, 51, 51, 0.5);\n\t\t}\n\n\t\t.item-right {\n\t\t\theight: 260rpx;\n\t\t\toverflow: hidden;\n\t\t}\n\n\t\t.del-btn {\n\t\t\tbottom: 40rpx;\n\t\t\tright: 30rpx;\n\t\t\twidth: 70rpx;\n\t\t\theight: 70rpx;\n\t\t}\n\t}\n\n\t/* 底部栏 */\n\t.action-section {\n\t\tz-index: 999;\n\t\tbottom: 0;\n\t\theight: 100rpx;\n\n\t\t.checkbox {\n\t\t\t.iconfont {\n\t\t\t\tfont-size: 46rpx;\n\t\t\t\tcolor: #2C405A;\n\t\t\t}\n\t\t}\n\n\t\t.clear-btn {\n\t\t\tleft: 100rpx;\n\t\t\tbackground: #2C405A;\n\t\t\tborder-radius: 0 50rpx 50rpx 0;\n\t\t\tpadding: 12rpx 0;\n\t\t\ttransition: all .2s;\n\n\t\t\twidth: 0;\n\t\t\topacity: 0;\n\n\t\t\t&.show {\n\t\t\t\twidth: 120rpx;\n\t\t\t\topacity: 1;\n\t\t\t}\n\t\t}\n\n\t\t.payment {\n\t\t\tpadding: 0 40rpx;\n\t\t\tfont-size: $font-base;\n\t\t\tbackground: $uni-color-primary;\n\t\t\tbox-shadow: 1px 2px 5px rgba(217, 60, 93, 0.72)\n\t\t}\n\t}\n\n\t/* #ifdef H5 || MP-360 */\n\t.action-section {\n\t\tmargin-bottom: 50px;\n\t}\n\n\t/* #endif */\n</style>\n","import mod from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1650634385478\n      var cssReload = require(\"D:/Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}